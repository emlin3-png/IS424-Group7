<span
  id="user-greeting"
  style="
    display: none;
    margin-left: 1.2rem;
    font-size: 1.3rem;
    color: #406b8c;
    vertical-align: middle;
  "
></span>
<!DOCTYPE html>
<!-- Information Systems 424 Fall 2025 -->
<!-- Group 7 - Reeya Anand, Natalie Bosco, Charlotte Daly, Isabelle Inthisone, Erica Lin -->
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="ido logo.png" type="image/x-icon" />
    <title>IDO UW Madison</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="website.css" />
    <!-- adding firebase stuff!! -->
    <!-- Firebase SDKs (v8 syntax since you're using namespaced version) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script type="module">
      // Import the functions you need from the SDKs you need
      // import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyCwZ8iGB1KRjPGogFreZdWLa-lB9m_LVz4",
        authDomain: "ido-draft.firebaseapp.com",
        projectId: "ido-draft",
        storageBucket: "ido-draft.firebasestorage.app",
        messagingSenderId: "29070862131",
        appId: "1:29070862131:web:0bb70dea1ff271f383c046",
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);

      // Initialize services
      window.auth = firebase.auth();
      window.db = firebase.firestore();
    </script>
  </head>
  <body onload="loadPage('home')">
    <nav>
      <div class="nav-left">
        <button
          onclick="loadPage('home')"
          style="background: none; border: none; padding: 0"
        >
          <img src="IDOlogoclear.png" alt="IDO Logo" />
        </button>
        <!-- <button onload="loadPage('home')">
          <a>
            <img src="IDOlogoclear.png" alt="IDO Logo" />
          </a>
        </button> -->
      </div>
      <div class="nav-right">
        <a href="about.html">About</a>
        <a href="members.html">Members Portal</a>
        <a href="contact.html">Contact</a>
        <a class="btn btn-outline" href="signin.html" id="nav-signin"
          >Sign In</a
        >
        <a class="btn btn-primary" href="signup.html" id="nav-signup"
          >Sign Up</a
        >
        <button id="logout-btn" class="btn btn-outline" style="display: none">
          Log Out
        </button>
      </div>
    </nav>
    <!-- Sign Up Modal -->
    <div
      id="signup-modal"
      style="
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #fffaee;
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.18);
        padding: 2rem 2.5rem;
        z-index: 2100;
        min-width: 320px;
        max-width: 90vw;
      "
    >
      <div
        style="
          display: flex;
          justify-content: space-between;
          align-items: center;
        "
      >
        <h2 style="color: #406b8c">Sign Up</h2>
        <button
          type="button"
          id="close-signup"
          style="
            background: none;
            border: none;
            font-size: 1.7rem;
            line-height: 1;
            color: #406b8c;
            cursor: pointer;
          "
        >
          &times;
        </button>
      </div>
      <form id="signup-form">
        <input
          type="text"
          id="signup-first"
          placeholder="First Name"
          required
          style="
            width: 100%;
            margin-bottom: 1rem;
            padding: 0.5rem;
            border-radius: 8px;
            border: 1px solid #a3c0c8;
            font-size: 1rem;
          "
        />
        <input
          type="text"
          id="signup-last"
          placeholder="Last Name"
          required
          style="
            width: 100%;
            margin-bottom: 1rem;
            padding: 0.5rem;
            border-radius: 8px;
            border: 1px solid #a3c0c8;
            font-size: 1rem;
          "
        />
        <input
          type="email"
          id="signup-email"
          placeholder="Email"
          required
          style="
            width: 100%;
            margin-bottom: 1rem;
            padding: 0.5rem;
            border-radius: 8px;
            border: 1px solid #a3c0c8;
            font-size: 1rem;
          "
        />
        <input
          type="password"
          id="signup-password"
          placeholder="Password"
          required
          style="
            width: 100%;
            margin-bottom: 1rem;
            padding: 0.5rem;
            border-radius: 8px;
            border: 1px solid #a3c0c8;
            font-size: 1rem;
          "
        />
        <button
          class="btn btn-primary"
          type="submit"
          style="width: 100%; margin-bottom: 0.5rem"
        >
          Sign Up
        </button>
      </form>
    </div>
    <!-- Sign In Modal -->
    <div
      id="signin-modal"
      style="
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #fffaee;
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.18);
        padding: 2rem 2.5rem;
        z-index: 2100;
        min-width: 320px;
        max-width: 90vw;
      "
    >
      <div
        style="
          display: flex;
          justify-content: space-between;
          align-items: center;
        "
      >
        <h2 style="color: #406b8c">Sign In</h2>
        <button
          type="button"
          id="close-signin"
          style="
            background: none;
            border: none;
            font-size: 1.7rem;
            line-height: 1;
            color: #406b8c;
            cursor: pointer;
          "
        >
          &times;
        </button>
      </div>
      <form id="signin-form">
        <input
          type="email"
          id="signin-email"
          placeholder="Email"
          required
          style="
            width: 100%;
            margin-bottom: 1rem;
            padding: 0.5rem;
            border-radius: 8px;
            border: 1px solid #a3c0c8;
            font-size: 1rem;
          "
        />
        <input
          type="password"
          id="signin-password"
          placeholder="Password"
          required
          style="
            width: 100%;
            margin-bottom: 1rem;
            padding: 0.5rem;
            border-radius: 8px;
            border: 1px solid #a3c0c8;
            font-size: 1rem;
          "
        />
        <button
          class="btn btn-primary"
          type="submit"
          style="width: 100%; margin-bottom: 0.5rem"
        >
          Sign In
        </button>
      </form>
    </div>

    <h3 class="uwmadison">University of Wisconsin-Madison</h3>
    <h1 class="ido">Interior Design Organization</h1>
    <div class="container">
      <!-- add "display: flex;" with css to this class type for 3-col layout-->
      <div class="column">
        <img src="about_images/Screenshot Taking a Picutre.png" alt="image" />
      </div>
      <div class="column">
        <img src="about_images/screenshot Strang photo.png" alt="image" />
      </div>
      <div class="column">
        <img src="about_images/Screenshot IMG_4665.png" alt="image" />
      </div>
    </div>
    <div class="promise">
      <img src="Screenshot feedbacked our promis.png" alt="" />
    </div>
    <div>
      <a
        href="https://docs.google.com/presentation/d/1HXTCLHgEFWN1ZFK_2z8cO8hDaN1arX7-9JS-NqIsOjI/edit?usp=sharing"
      >
        <h2>Access our Event Calendar</h2>
      </a>
      <!-- <iframe
        src="https://docs.google.com/presentation/d/1HXTCLHgEFWN1ZFK_2z8cO8hDaN1arX7-9JS-NqIsOjI/view?usp=sharing"
        frameborder="0"
        width="960"
        height="569"
        allowfullscreen
      ></iframe> -->
    </div>
    <script src="website.js"></script>
  </body>
  <footer>
    <a href="mailto:ido.uwmadison@gmail.com" target="_blank">
      <img src="EmailIcon.png" alt="Email Icon" height="20" />
      ido.uwmadison@gmail.com
    </a>
    <a href="https://www.instagram.com/idouwmadison/?hl=en" target="_blank">
      <img src="InstaIcon.png" alt="Instagram Icon" height="20" />
      @idouwmadison
    </a>
  </footer>
  <script>
    // Carousel script
    (function () {
      const track = document.querySelector(".carousel-track");
      if (!track) return;
      const slides = Array.from(track.children);
      const prevButton = document.querySelector(".carousel-button.prev");
      const nextButton = document.querySelector(".carousel-button.next");
      const slideWidth = slides[0].getBoundingClientRect().width;

      // arrange slides next to one another
      const setSlidePosition = (slide, index) => {
        slide.style.left = 100 * index + "%";
      };
      slides.forEach(setSlidePosition);

      let currentIndex = 0;

      const moveToSlide = (index) => {
        if (index < 0) index = slides.length - 1;
        if (index >= slides.length) index = 0;
        track.style.transform = "translateX(-" + 100 * index + "%)";
        currentIndex = index;
      };

      nextButton.addEventListener("click", () => moveToSlide(currentIndex + 1));
      prevButton.addEventListener("click", () => moveToSlide(currentIndex - 1));

      // autoplay
      let autoplay = setInterval(() => moveToSlide(currentIndex + 1), 4000);
      const carousel = document.querySelector(".carousel");
      carousel.addEventListener("mouseenter", () => clearInterval(autoplay));
      carousel.addEventListener("mouseleave", () => {
        autoplay = setInterval(() => moveToSlide(currentIndex + 1), 4000);
      });

      // responsive: ensure slides still positioned if window resized
      window.addEventListener("resize", () => slides.forEach(setSlidePosition));
    })();

    // Modal forms for sign in and sign up
    const signUpBtn = document.querySelector(
      '.btn.btn-primary[href="signup.html"]'
    );
    const signInBtn = document.querySelector(
      '.btn.btn-outline[href="signin.html"]'
    );
    const signupModal = document.getElementById("signup-modal");
    const signinModal = document.getElementById("signin-modal");
    const closeSignup = document.getElementById("close-signup");
    const closeSignin = document.getElementById("close-signin");

    function openModal(modal) {
      modal.style.display = "block";
    }
    function closeModals() {
      signupModal.style.display = "none";
      signinModal.style.display = "none";
    }
    if (signUpBtn)
      signUpBtn.addEventListener("click", (e) => {
        e.preventDefault();
        openModal(signupModal);
      });
    if (signInBtn)
      signInBtn.addEventListener("click", (e) => {
        e.preventDefault();
        openModal(signinModal);
      });
    closeSignup.addEventListener("click", closeModals);
    closeSignin.addEventListener("click", closeModals);

    function showLogoutOnly() {
      document.getElementById("nav-signin").style.display = "none";
      document.getElementById("nav-signup").style.display = "none";
      document.getElementById("user-greeting").style.display = "none";
      document.getElementById("logout-btn").style.display = "inline-block";
    }

    function resetNav() {
      document.getElementById("nav-signin").style.display = "inline-block";
      document.getElementById("nav-signup").style.display = "inline-block";
      document.getElementById("user-greeting").style.display = "none";
      document.getElementById("logout-btn").style.display = "none";
    }

    document
      .getElementById("signup-form")
      .addEventListener("submit", function (e) {
        e.preventDefault();
        closeModals();
        showLogoutOnly();
      });

    document
      .getElementById("signin-form")
      .addEventListener("submit", function (e) {
        e.preventDefault();
        closeModals();
        showLogoutOnly();
      });

    document
      .getElementById("logout-btn")
      .addEventListener("click", function () {
        resetNav();
      });

    // Note to self: use command + / to comment chunks out!
    // a function to return elements by their IDs
    function r_e(id) {
      return document.querySelector(`#${id}`);
    }

    // Sign up function
    r_e("signup-form").addEventListener("submit", (e) => {
      // prevent page from auto refresh
      e.preventDefault();
      // capture fname, lname, email, and pass
      let fname = r_e("signup-first").value;
      let lname = r_e("signup-last").value;
      let email = r_e("signup-email").value;
      let pass = r_e("signup-password").value;
      // console.log(fname, lname, email, pass);
      // create user
      auth
        .createUserWithEmailAndPassword(email, pass)
        .then((userCredential) => {
          const user = userCredential.user;
          // Saves user info to Firestore
          return db.collection("users").doc(user.uid).set({
            firstName: fname,
            lastName: lname,
            email: email,
          });
        })
        .catch((error) => {
          console.error("Error during sign up:", error.message);
        });
      // don't need to close the modal from here, correct?
      // can only "sign up/in" with valid emails? (ie won't display as logged in)
    });

    // Sign In Function
    r_e("signin-form").addEventListener("submit", (e) => {
      // prevent page from auto refresh
      e.preventDefault();
      // find the email and pass and pass to firebase
      let email = r_e("signin-email").value;
      let pass = r_e("signin-password").value;
      auth.signInWithEmailAndPassword(email, pass);
      // console.log("Signing in with", email, pass);
      // need to reset modal?
      // will want to modify so if invalid creds then not logged in
      // // .catch((error) => {
      // //   console.error("Error during sign up:", error.message);
      // // });
    });

    // Signout Function
    r_e("logout-btn").addEventListener("click", () => {
      auth.signOut();
    });
  </script>
</html>
